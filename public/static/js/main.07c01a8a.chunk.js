(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{179:function(e,t,a){e.exports=a(329)},184:function(e,t,a){},192:function(e,t,a){},193:function(e,t,a){},329:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(28),o=a.n(s),i=(a(184),a(30)),c=a.n(i),u=a(170),l="FETCH_DATA";function d(e){return{type:l,data:e}}var f=a(59),h=(a(192),a(100)),v=a(340),m=a(339),p=a(341),w=a(343),y=(a(193),a(26)),D=a.n(y),E=function(e){var t=e.filterHandler;return n.a.createElement(h.c,{onSubmit:function(e){return t(e)}},(function(e){var t=e.formProps,a=(e.dirty,e.submitting);return n.a.createElement("form",t,n.a.createElement("div",{className:"filter-container"},n.a.createElement("div",{className:"filter-item"},n.a.createElement(w.a,{label:"Start date",name:"startDate",defaultValue:D()().startOf("isoWeek").format("YYYY-MM-DD")},(function(e){var t=e.fieldProps;e.error,e.valid;return n.a.createElement(m.a,t)}))),n.a.createElement("div",{className:"filter-item"},n.a.createElement(w.a,{label:"End date",name:"endDate",defaultValue:D()().endOf("isoWeek").format("YYYY-MM-DD")},(function(e){var t=e.fieldProps;e.error,e.valid;return n.a.createElement(m.a,t)}))),n.a.createElement("div",{className:"filter-item"},n.a.createElement(w.a,{label:"User",name:"user",defaultValue:""},(function(e){var t=e.fieldProps;e.error,e.valid;return n.a.createElement(p.a,t)}))),n.a.createElement("div",{className:"filter-item"},n.a.createElement(w.a,{label:"Issue",name:"issue",defaultValue:""},(function(e){var t=e.fieldProps;e.error,e.valid;return n.a.createElement(p.a,t)}))),n.a.createElement("div",{className:"submit-button"},n.a.createElement(v.a,{type:"submit",appearance:"primary",isDisabled:a},"Search"))))}))},b=a(33),k=a(34),g=a(169);var J=a.n(g).a.create({baseURL:"http://localhost:3001"});function A(e){var t="/users",a="/issues";if(e){e.userName&&(t="".concat(t,"/").concat(e.userName));var r="";e.issue&&(r="".concat(r,"project=").concat(e.issue,"&"));var n=D()(e.startDate).format("YYYY-MM-DD");r="".concat(r,"created>=").concat(n,"&");var s=D()(e.endDate).format("YYYY-MM-DD");(r="".concat(r,"created<=").concat(s,"&")).endsWith("&")&&(r=r.slice(0,-1)),a="".concat(a,"/").concat(r)}return Promise.all([J.get(t),J.get(a)])}J.interceptors.request.use((function(e){return e.url=e.url+"?jwt="+window.parent.window.token,e}));var j=function(){function e(){Object(b.a)(this,e)}return Object(k.a)(e,[{key:"fromJson",value:function(e){return{accountType:e.accountType,accountId:e.accountId,displayName:e.displayName,isActive:e.active}}},{key:"toJson",value:function(e){throw new Error("Method not implemented.")}},{key:"parseArrayFromJson",value:function(e){var t=this,a=new Array;return e.forEach((function(e){var r=t.fromJson(e);r.isActive&&"atlassian"===r.accountType&&a.push(r)})),a}},{key:"parseArrayToJson",value:function(e){throw new Error("Method not implemented.")}}]),e}(),O=function(){function e(){Object(b.a)(this,e)}return Object(k.a)(e,[{key:"fromJson",value:function(e){return{key:e.key,name:e.name}}},{key:"toJson",value:function(e){throw new Error("Method not implemented.")}},{key:"parseArrayFromJson",value:function(e){var t=this,a=new Array;return e.forEach((function(e){a.push(t.fromJson(e))})),a}},{key:"parseArrayToJson",value:function(e){throw new Error("Method not implemented.")}}]),e}(),Y=function(){function e(){Object(b.a)(this,e)}return Object(k.a)(e,[{key:"fromJson",value:function(e){var t=new j,a=new O;return{key:e.key,assignee:t.fromJson(e.fields.assignee),creator:t.fromJson(e.fields.creator),created:new Date(e.fields.created),project:a.fromJson(e.fields.project)}}},{key:"toJson",value:function(e){throw new Error("Method not implemented.")}},{key:"parseArrayFromJson",value:function(e){var t=this,a=new Array;return e.forEach((function(e){a.push(t.fromJson(e))})),a}},{key:"parseArrayToJson",value:function(e){throw new Error("Method not implemented.")}}]),e}(),M=function(){function e(){Object(b.a)(this,e),this.data=new Array,this.users=new Array,this.issues=new Array,this.dates=new Array,this.startDate=void 0,this.endDate=void 0}return Object(k.a)(e,[{key:"addDates",value:function(e,t){this.startDate=e,this.endDate=t;for(var a=this.generateDates(e,t),r=0;r<a.length;r++){var n=this.createCell(r+1,0,a[r]);this.dates.push(n)}return this}},{key:"addUsers",value:function(e){for(var t=0;t<e.length;t++){var a=this.createCell(0,t+1,e[t].displayName);this.users.push(a)}return this}},{key:"addIssues",value:function(e){var t=this;if(!this.users)throw new Error("Issues can not be displayed without users. You need to set the users.");if(!this.dates)throw new Error("Issues can not be displayed without dates. You need to set rhe dates.");for(var a=new Map,r=function(r){var n=e[r],s=t.dates.find((function(e){return e.value===n.created.toLocaleDateString()})),o=t.users.find((function(e){return e.value===n.assignee.displayName}));if(console.log("before if"),s&&o){console.log("in if");var i,c=s.col,u=o.row,l=a.get({row:u,col:c});i=l&&l.value?"".concat(l.value,"\n").concat(n.key):n.key;var d=t.createCell(c,u,i);a.set({row:u,col:c},d),t.issues.push(d)}},n=0;n<e.length;n++)r(n);return console.log(this.issues),this}},{key:"build",value:function(){var e=this,t=1,a=7;if(this.startDate&&this.endDate){var r=D()(this.startDate.setDate(this.startDate.getDate()-1)),n=D()(this.endDate);a=Math.trunc(D.a.duration(n.diff(r)).asDays())+1}this.users&&(t=this.users.length+1);for(var s=0;s<t;s++){for(var o=new Array,i=0;i<a;i++)o.push(this.createCell(i,s,""));this.data.push(o)}return this.dates&&this.dates.forEach((function(t){e.addCell(t)})),this.users&&this.users.forEach((function(t){e.addCell(t)})),this.issues&&this.issues.forEach((function(t){e.addCell(t)})),console.log(this.issues),this.data}},{key:"createCell",value:function(e,t,a){return{col:e,row:t,value:a,dataViewer:{}}}},{key:"addCell",value:function(e){this.data[e.row][e.col]=e}},{key:"generateDates",value:function(e,t){for(var a=new Array,r=e;r<=t;)a.push(new Date(r).toLocaleDateString()),r.setDate(r.getDate()+1);return a}}]),e}(),N=function(){function e(){Object(b.a)(this,e),this.defaultQuery={startDate:D()().startOf("isoWeek").toDate(),endDate:D()().endOf("isoWeek").toDate()}}return Object(k.a)(e,[{key:"loadData",value:function(){var e,t,a,r,n,s,o,i=arguments;return c.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:this.defaultQuery,u.prev=1,u.next=4,c.a.awrap(A(e));case 4:t=u.sent,u.next=10;break;case 7:u.prev=7,u.t0=u.catch(1),t=null;case 10:return a=t?(new j).parseArrayFromJson(t[0].data):[],r=t?(new Y).parseArrayFromJson(t[1].data.issues):[],n=e.startDate,s=e.endDate,o=(new M).addDates(n,s).addUsers(a).addIssues(r).build(),u.abrupt("return",o);case 16:case"end":return u.stop()}}),null,this,[[1,7]])}}]),e}(),x=function(){var e=new N,t=Object(f.c)((function(e){return e.data})),a=Object(f.b)(),s=function(){return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.awrap(e.loadData());case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))},o=function(t){return c.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.a.awrap(e.loadData(t));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}))};return Object(r.useEffect)((function(){!function(){var e;c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.awrap(s());case 2:e=t.sent,a(d(e));case 4:case"end":return t.stop()}}))}()}),[]),n.a.createElement("div",{className:"container"},n.a.createElement("div",null,n.a.createElement(E,{filterHandler:function(e){var t,r;return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={userName:e.user,issue:e.issue,startDate:new Date(e.startDate),endDate:new Date(e.endDate)},n.next=3,c.a.awrap(o(t));case 3:r=n.sent,a(d(r));case 5:case"end":return n.stop()}}))}})),n.a.createElement("div",{className:"roster-container"},n.a.createElement(u.a,{data:t})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var C=a(71),I=a(171),T={data:[]};var W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return{data:Object(I.a)(t.data)};default:return e}},F=Object(C.b)(W);o.a.render(n.a.createElement(f.a,{store:F},n.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[179,1,2]]]);
//# sourceMappingURL=main.07c01a8a.chunk.js.map