(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{179:function(e,t,a){e.exports=a(329)},184:function(e,t,a){},192:function(e,t,a){},193:function(e,t,a){},329:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(28),s=a.n(o),c=(a(184),a(30)),i=a.n(c),u=a(170),l="FETCH_DATA";function d(e){return{type:l,data:e}}var f=a(59),v=(a(192),a(100)),m=a(340),h=a(339),p=a(341),y=a(343),w=(a(193),a(26)),D=a.n(w),k=function(e){var t=e.filterHandler;return r.a.createElement(v.c,{onSubmit:function(e){return t(e)}},(function(e){var t=e.formProps,a=(e.dirty,e.submitting);return r.a.createElement("form",t,r.a.createElement("div",{className:"filter-container"},r.a.createElement("div",{className:"filter-item"},r.a.createElement(y.a,{label:"Start date",name:"startDate",defaultValue:D()().startOf("isoWeek").format("YYYY-MM-DD")},(function(e){var t=e.fieldProps;e.error,e.valid;return r.a.createElement(h.a,t)}))),r.a.createElement("div",{className:"filter-item"},r.a.createElement(y.a,{label:"End date",name:"endDate",defaultValue:D()().endOf("isoWeek").format("YYYY-MM-DD")},(function(e){var t=e.fieldProps;e.error,e.valid;return r.a.createElement(h.a,t)}))),r.a.createElement("div",{className:"filter-item"},r.a.createElement(y.a,{label:"User",name:"user",defaultValue:""},(function(e){var t=e.fieldProps;e.error,e.valid;return r.a.createElement(p.a,t)}))),r.a.createElement("div",{className:"filter-item"},r.a.createElement(y.a,{label:"Issue",name:"issue",defaultValue:""},(function(e){var t=e.fieldProps;e.error,e.valid;return r.a.createElement(p.a,t)}))),r.a.createElement("div",{className:"submit-button"},r.a.createElement(m.a,{type:"submit",appearance:"primary",isDisabled:a},"Search"))))}))},E=a(33),b=a(34),g=a(169);var J=a.n(g).a.create({baseURL:"http://localhost:3001"});function j(e){var t="/users",a="/issues";if(e){e.userName&&(t="".concat(t,"/").concat(e.userName));var n="";e.issue&&(n="".concat(n,"project=").concat(e.issue,"&"));var r=D()(e.startDate).format("YYYY-MM-DD");n="".concat(n,"created>=").concat(r,"&");var o=D()(e.endDate).format("YYYY-MM-DD");(n="".concat(n,"created<=").concat(o,"&")).endsWith("&")&&(n=n.slice(0,-1)),a="".concat(a,"/").concat(n)}return Promise.all([J.get(t),J.get(a)])}J.interceptors.request.use((function(e){return e.url=e.url+"?jwt="+window.parent.window.token,e}));var O=function(){function e(){Object(E.a)(this,e)}return Object(b.a)(e,[{key:"fromJson",value:function(e){return{accountType:e.accountType,accountId:e.accountId,displayName:e.displayName,isActive:e.active}}},{key:"toJson",value:function(e){throw new Error("Method not implemented.")}},{key:"parseArrayFromJson",value:function(e){var t=this,a=new Array;return e.forEach((function(e){var n=t.fromJson(e);n.isActive&&"atlassian"===n.accountType&&a.push(n)})),a}},{key:"parseArrayToJson",value:function(e){throw new Error("Method not implemented.")}}]),e}(),A=function(){function e(){Object(E.a)(this,e)}return Object(b.a)(e,[{key:"fromJson",value:function(e){return{key:e.key,name:e.name}}},{key:"toJson",value:function(e){throw new Error("Method not implemented.")}},{key:"parseArrayFromJson",value:function(e){var t=this,a=new Array;return e.forEach((function(e){a.push(t.fromJson(e))})),a}},{key:"parseArrayToJson",value:function(e){throw new Error("Method not implemented.")}}]),e}(),Y=function(){function e(){Object(E.a)(this,e)}return Object(b.a)(e,[{key:"fromJson",value:function(e){var t=new O,a=new A;return{key:e.key,assignee:t.fromJson(e.fields.assignee),creator:t.fromJson(e.fields.creator),created:new Date(e.fields.created),project:a.fromJson(e.fields.project)}}},{key:"toJson",value:function(e){throw new Error("Method not implemented.")}},{key:"parseArrayFromJson",value:function(e){var t=this,a=new Array;return e.forEach((function(e){a.push(t.fromJson(e))})),a}},{key:"parseArrayToJson",value:function(e){throw new Error("Method not implemented.")}}]),e}(),M=function(){function e(t,a,n){Object(E.a)(this,e),this.rowCount=void 0,this.columnCount=0,this.data=new Array,this.startDate=void 0,this.endDate=void 0,this.startDate=a,this.endDate=n,this.rowCount=t,this.prepare(),this.initData()}return Object(b.a)(e,[{key:"addUsers",value:function(e){for(var t=0;t<e.length;t++){var a=this.createCell(0,t+1,e[t].displayName);this.addCell(a)}return this}},{key:"addIssues",value:function(e){for(var t=this,a=this.data.map((function(e){return e[0]})),n=function(n){var r=e[n],o=t.data[0].find((function(e){return e.value===r.created.toLocaleDateString()})),s=a.find((function(e){return e.value===r.assignee.displayName}));if(o&&s){var c,i=o.col,u=s.row,l=t.data[u][i];c=l.value?"".concat(l.value,"\n").concat(r.key):r.key;var d=t.createCell(i,u,c);t.addCell(d)}},r=0;r<e.length;r++)n(r);return this}},{key:"build",value:function(){return this.data}},{key:"createCell",value:function(e,t,a){return{col:e,row:t,value:a}}},{key:"addCell",value:function(e){this.data[e.row][e.col]=e}},{key:"prepare",value:function(){var e=D()(this.startDate.setDate(this.startDate.getDate()-1)),t=D()(this.endDate);this.columnCount=Math.trunc(D.a.duration(t.diff(e)).asDays())+1}},{key:"initData",value:function(){for(var e=this.generateDates(this.startDate,this.endDate),t=0;t<this.rowCount;t++){for(var a=new Array,n=0;n<this.columnCount;n++){var r=void 0;r=0===t&&n>0?{row:t,col:n,value:e[n]}:{row:t,col:n,value:""},a.push(r)}this.data.push(a)}}},{key:"generateDates",value:function(e,t){for(var a=new Array,n=e;n<=t;)a.push(new Date(n).toLocaleDateString()),n.setDate(n.getDate()+1);return a}}]),e}(),N=function(){function e(){Object(E.a)(this,e),this.defaultQuery={startDate:D()().startOf("isoWeek").toDate(),endDate:D()().endOf("isoWeek").toDate()}}return Object(b.a)(e,[{key:"loadData",value:function(){var e,t,a,n,r,o,s,c,u=arguments;return i.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return e=u.length>0&&void 0!==u[0]?u[0]:this.defaultQuery,l.prev=1,l.next=4,i.a.awrap(j(e));case 4:t=l.sent,l.next=10;break;case 7:l.prev=7,l.t0=l.catch(1),t=null;case 10:return a=t?(new O).parseArrayFromJson(t[0].data):[],n=t?(new Y).parseArrayFromJson(t[1].data.issues):[],r=e.startDate,o=e.endDate,s=a.length+1,c=new M(s,r,o).addUsers(a).addIssues(n).build(),l.abrupt("return",c);case 17:case"end":return l.stop()}}),null,this,[[1,7]])}}]),e}(),C=function(){var e=new N,t=Object(f.c)((function(e){return e.data})),a=Object(f.b)(),o=function(){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(e.loadData());case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))},s=function(t){return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.awrap(e.loadData(t));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}))};return Object(n.useEffect)((function(){!function(){var e;i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(o());case 2:e=t.sent,a(d(e));case 4:case"end":return t.stop()}}))}()}),[]),r.a.createElement("div",{className:"container"},r.a.createElement("div",null,r.a.createElement(k,{filterHandler:function(e){var t,n;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t={userName:e.user,issue:e.issue,startDate:new Date(e.startDate),endDate:new Date(e.endDate)},r.next=3,i.a.awrap(s(t));case 3:n=r.sent,a(d(n));case 5:case"end":return r.stop()}}))}})),r.a.createElement("div",{className:"roster-container"},r.a.createElement(u.a,{data:t})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var x=a(71),T=a(171),W={data:[]};var F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return{data:Object(T.a)(t.data)};default:return e}},I=Object(x.b)(F);s.a.render(r.a.createElement(f.a,{store:I},r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[179,1,2]]]);
//# sourceMappingURL=main.7f241482.chunk.js.map