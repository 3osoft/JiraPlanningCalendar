(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{208:function(e,t,a){e.exports=a(390)},213:function(e,t,a){},390:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(25),s=a.n(o),i=(a(213),a(114)),c=a(32),u=a.n(c),l=a(199),d=function(e){return{type:"FETCH_DATA",data:e}},f=a(39),p=a(115),v=a(401),h=a(400),m=a(403),w=a(405),g=a(27),y=a.n(g),D=function(e){var t=function(e){return{width:"25%",flex:"0 1 auto",alignSelf:"auto",marginLeft:0===e?"0":"1%"}},a=e.filterHandler;return n.a.createElement(p.c,{onSubmit:function(e){return a(e)}},(function(e){var a=e.formProps,r=(e.dirty,e.submitting);return n.a.createElement("form",a,n.a.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"flex-start",alignItems:"flex-start",alignContent:"space-between"}},n.a.createElement("div",{style:t(0)},n.a.createElement(w.a,{label:"Start date",name:"startDate",defaultValue:y()().startOf("isoWeek").format("YYYY-MM-DD")},(function(e){var t=e.fieldProps;e.error,e.valid;return n.a.createElement(h.a,t)}))),n.a.createElement("div",{style:t(1)},n.a.createElement(w.a,{label:"End date",name:"endDate",defaultValue:y()().endOf("isoWeek").format("YYYY-MM-DD")},(function(e){var t=e.fieldProps;e.error,e.valid;return n.a.createElement(h.a,t)}))),n.a.createElement("div",{style:t(2)},n.a.createElement(w.a,{label:"User",name:"user",defaultValue:""},(function(e){var t=e.fieldProps;e.error,e.valid;return n.a.createElement(m.a,t)}))),n.a.createElement("div",{style:t(3)},n.a.createElement(w.a,{label:"Issue",name:"issue",defaultValue:""},(function(e){var t=e.fieldProps;e.error,e.valid;return n.a.createElement(m.a,t)}))),n.a.createElement("div",{style:{width:"10%",flex:"0 1 auto",alignSelf:"center",marginLeft:"1%",marginTop:"30px"}},n.a.createElement(v.a,{type:"submit",appearance:"primary",isDisabled:r},"Search"))))}))},b=a(34),E=a(31),O=a(194);var k=a.n(O).a.create({baseURL:"http://localhost:3001"});function j(e){var t="/users",a="/issues";if(e){e.userName&&(t="".concat(t,"/").concat(e.userName));var r="";e.issue&&(r="".concat(r,"project=").concat(e.issue,"&"));var n=y()(e.startDate).format("YYYY-MM-DD");r="".concat(r,"created>=").concat(n,"&");var o=y()(e.endDate).format("YYYY-MM-DD");(r="".concat(r,"created<=").concat(o,"&")).endsWith("&")&&(r=r.slice(0,-1)),a="".concat(a,"/").concat(r)}return Promise.all([k.get(t),k.get(a)])}k.interceptors.request.use((function(e){return e.url=e.url+"?jwt="+window.parent.window.token,e}));var x=function(){function e(){Object(b.a)(this,e)}return Object(E.a)(e,[{key:"fromJson",value:function(e){return{accountType:e.accountType,accountId:e.accountId,displayName:e.displayName,isActive:e.active}}},{key:"toJson",value:function(e){throw new Error("Method not implemented.")}},{key:"parseArrayFromJson",value:function(e){var t=this,a=new Array;return e.forEach((function(e){var r=t.fromJson(e);r.isActive&&"atlassian"===r.accountType&&a.push(r)})),a}},{key:"parseArrayToJson",value:function(e){throw new Error("Method not implemented.")}}]),e}(),J=function(){function e(){Object(b.a)(this,e)}return Object(E.a)(e,[{key:"fromJson",value:function(e){return{key:e.key,name:e.name}}},{key:"toJson",value:function(e){throw new Error("Method not implemented.")}},{key:"parseArrayFromJson",value:function(e){var t=this,a=new Array;return e.forEach((function(e){a.push(t.fromJson(e))})),a}},{key:"parseArrayToJson",value:function(e){throw new Error("Method not implemented.")}}]),e}(),A=function(){function e(){Object(b.a)(this,e)}return Object(E.a)(e,[{key:"fromJson",value:function(e){var t=new x,a=new J;return{key:e.key,assignee:t.fromJson(e.fields.assignee),creator:t.fromJson(e.fields.creator),created:new Date(e.fields.created),project:a.fromJson(e.fields.project)}}},{key:"toJson",value:function(e){throw new Error("Method not implemented.")}},{key:"parseArrayFromJson",value:function(e){var t=this,a=new Array;return e.forEach((function(e){a.push(t.fromJson(e))})),a}},{key:"parseArrayToJson",value:function(e){throw new Error("Method not implemented.")}}]),e}(),M=a(201),C=a(65),I=a(198),R=a.n(I),S=function(e){var t=e.cell,a=t.row,r=t.col,o=JSON.stringify({row:a,col:r}),s=function(e,t){t&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation())};return n.a.createElement(C.c,{droppableId:o},(function(e,a){return n.a.createElement("div",{ref:e.innerRef,style:(r=a.isDraggingOver,{background:r?"lightblue":"white",padding:"8px"})},t.value.map((function(e,t){return n.a.createElement(C.b,{key:e,draggableId:e,index:t},(function(t,a){return n.a.createElement("div",Object.assign({onMouseDown:function(e){return s(e,t.isDragging)},onMouseUp:function(e){return s(e,t.isDragging)},onMouseOver:function(e){return s(e,t.isDragging)},onMouseMove:function(e){return s(e,t.isDragging)},ref:t.innerRef},t.draggableProps,{style:(r=a.isDragging,o=t.draggableProps.style,Object(M.a)({display:"flex",userSelect:"none",padding:"3px",marginTop:"2px",marginBottom:"2px",background:r?"lightgreen":"white"},o))}),n.a.createElement("div",Object.assign({},t.dragHandleProps,{style:{width:"20px",height:"20px"}}),n.a.createElement(R.a,{label:"drag-handle"})),e);var r,o}))})),e.placeholder);var r}))},Y=function(e){var t=e.cell;return n.a.createElement("div",{onMouseDown:function(e){return e.stopPropagation()},onMouseOver:function(e){return e.stopPropagation()}},t.value)},P=function(){function e(t,a,r,n){Object(b.a)(this,e),this.data=new Array,this.users=new Array,this.issues=new Array,this.dates=new Array,this.startDate=void 0,this.endDate=void 0,this.startDate=r,this.endDate=n,this.addDates(),this.addUsers(t),this.addIssues(a),this.create()}return Object(E.a)(e,[{key:"calendarData",get:function(){return this.data}}]),Object(E.a)(e,[{key:"addDates",value:function(){for(var e=this.generateDates(new Date(this.startDate),new Date(this.endDate)),t=0;t<e.length;t++){var a=this.createCell(t+1,0,e[t],Y);this.dates.push(a)}}},{key:"addUsers",value:function(e){for(var t=0;t<e.length;t++){var a=this.createCell(0,t+1,e[t].displayName);this.users.push(a)}}},{key:"addIssues",value:function(e){for(var t=this,a=new Map,r=function(r){var n=e[r],o=t.dates.find((function(e){return e.value===n.created.toLocaleDateString()})),s=t.users.find((function(e){return e.value===n.assignee.displayName}));if(o&&s){var i=o.col,c=s.row,u=a.get(JSON.stringify({row:c,col:i}));u||(u=[]),u.push(n.key),a.set(JSON.stringify({row:c,col:i}),u);var l=t.createCell(i,c,u,S);t.issues.push(l)}},n=0;n<e.length;n++)r(n)}},{key:"create",value:function(){var e=this,t=y()(this.startDate.setDate(this.startDate.getDate()-1)),a=y()(this.endDate),r=this.users.length+1,n=Math.trunc(y.a.duration(a.diff(t)).asDays())+1;console.log(this.startDate),console.log(this.endDate);for(var o=0;o<r;o++){this.data[o]=[];for(var s=0;s<n;s++){var i=this.createCell(s,o,[],S);this.addCell(i)}}this.dates.forEach((function(t){e.addCell(t)})),this.users.forEach((function(t){e.addCell(t)})),this.issues.forEach((function(t){e.addCell(t)}))}},{key:"createCell",value:function(e,t,a,r){return{col:e,row:t,value:a,DataViewer:r}}},{key:"addCell",value:function(e){this.data[e.row][e.col]=e}},{key:"generateDates",value:function(e,t){for(var a=new Array,r=e;r<=t;)a.push(new Date(r).toLocaleDateString()),r.setDate(r.getDate()+1);return a}}]),e}(),T=function(){function e(){Object(b.a)(this,e),this.defaultQuery={startDate:y()().startOf("isoWeek").toDate(),endDate:y()().endOf("isoWeek").toDate()}}return Object(E.a)(e,[{key:"loadData",value:function(){var e,t,a,r,n,o=arguments;return u.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:this.defaultQuery,s.next=3,u.a.awrap(j(e));case 3:return t=s.sent,a=(new x).parseArrayFromJson(t[0].data),r=(new A).parseArrayFromJson(t[1].data.issues),n=new P(a,r,e.startDate,e.endDate).calendarData,console.log(n),s.abrupt("return",n);case 9:case"end":return s.stop()}}),null,this)}}]),e}(),N=function(){var e=new T,t=Object(f.d)((function(e){return e.data})),a=Object(f.c)(),o=function(t){return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.awrap(e.loadData(t));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}))};Object(r.useEffect)((function(){u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:a(d([[{row:0,col:0,value:["Raspberry","Apple"],DataViewer:S},{row:0,col:1,value:["Paprika","Onion"],DataViewer:S}],[{row:1,col:0,value:["Cola","Fanta","Sprite"],DataViewer:S}]]));case 2:case"end":return e.stop()}}))}),[]);var s=function(e,a){return t[e][a].value};return n.a.createElement("div",{style:{paddingTop:"1%",paddingBottom:"1%",paddingLeft:"1.5%",paddingRight:"1.5%",backgroundColor:"white"}},n.a.createElement("div",null,n.a.createElement(D,{filterHandler:function(e){var t,r;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={userName:e.user,issue:e.issue,startDate:new Date(e.startDate),endDate:new Date(e.endDate)},n.next=3,u.a.awrap(o(t));case 3:r=n.sent,a(d(r));case 5:case"end":return n.stop()}}))}})),n.a.createElement("div",{style:{marginTop:"1%"}},n.a.createElement(C.a,{onDragEnd:function(e){var t,r,n,o,c,u,l=e.source,d=e.destination;if(d)if(l.droppableId===d.droppableId){var f=JSON.parse(l.droppableId),p=f.row,v=f.col,h=function(e,t,a){var r=Array.from(e),n=r.splice(t,1),o=Object(i.a)(n,1)[0];return r.splice(a,0,o),r}(s(p,v),l.index,d.index);a(function(e,t,a){return{type:"REORDER",row:e,col:t,data:a}}(p,v,h))}else{var m=JSON.parse(l.droppableId),w=JSON.parse(d.droppableId),g=m.row,y=m.col,D=w.row,b=w.col,E=function(e,t,a,r){var n=Array.from(e),o=Array.from(t),s=n.splice(a.index,1),c=Object(i.a)(s,1)[0];o.splice(r.index,0,c);var u={};return u[a.droppableId]=n,u[r.droppableId]=o,u}(s(g,y),s(D,b),l,d);a((t=g,r=y,n=E[l.droppableId],o=D,c=b,u=E[d.droppableId],{type:"MOVE",sourRow:t,sourCol:r,sourData:n,destRow:o,destCol:c,destData:u}))}}},n.a.createElement(l.a,{style:function(){return{".Spreadsheet td":{whiteSpace:"pre"}}},data:t}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var V=a(35),F=a(89),W={data:[]},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_DATA":return{data:Object(F.a)(t.data)};case"REORDER":var a=Object.assign({},e.data[t.row][t.col]);a.value=t.data;var r=Object(F.a)(e.data);return r[t.row][t.col]=a,{data:r};case"MOVE":var n=Object.assign({},e.data[t.sourRow][t.sourCol]);n.value=t.sourData;var o=Object.assign({},e.data[t.destRow][t.destCol]);o.value=t.destData;var s=Object(F.a)(e.data);return s[t.sourRow][t.sourCol]=n,s[t.destRow][t.destCol]=o,{data:s};default:return e}},H=Object(V.d)(L);s.a.render(n.a.createElement(f.a,{store:H},n.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[208,1,2]]]);
//# sourceMappingURL=main.d3f37e32.chunk.js.map