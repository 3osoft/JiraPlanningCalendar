(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{210:function(e,t,a){e.exports=a(393)},215:function(e,t,a){},392:function(e,t,a){},393:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(25),s=a.n(o),i=(a(215),a(114)),c=a(37),l=a.n(c),u=a(201),d=a(34),f=a(31),p=function(){function e(){Object(d.a)(this,e)}return Object(f.a)(e,[{key:"fromJson",value:function(e){return{accountType:e.accountType,accountId:e.accountId,displayName:e.displayName,isActive:e.active}}},{key:"toJson",value:function(e){throw new Error("Method not implemented.")}},{key:"parseArrayFromJson",value:function(e){var t=this,a=new Array;return e.forEach((function(e){var n=t.fromJson(e);n.isActive&&"atlassian"===n.accountType&&a.push(n)})),a}},{key:"parseArrayToJson",value:function(e){throw new Error("Method not implemented.")}}]),e}(),v=function(){function e(){Object(d.a)(this,e)}return Object(f.a)(e,[{key:"fromJson",value:function(e){return{key:e.key,name:e.name}}},{key:"toJson",value:function(e){throw new Error("Method not implemented.")}},{key:"parseArrayFromJson",value:function(e){var t=this,a=new Array;return e.forEach((function(e){a.push(t.fromJson(e))})),a}},{key:"parseArrayToJson",value:function(e){throw new Error("Method not implemented.")}}]),e}(),h=function(){function e(){Object(d.a)(this,e)}return Object(f.a)(e,[{key:"fromJson",value:function(e){var t=new p,a=new v;return{key:e.key,assignee:t.fromJson(e.fields.assignee),creator:t.fromJson(e.fields.creator),created:new Date(e.fields.created),project:a.fromJson(e.fields.project)}}},{key:"toJson",value:function(e){throw new Error("Method not implemented.")}},{key:"parseArrayFromJson",value:function(e){var t=this,a=new Array;return e.forEach((function(e){a.push(t.fromJson(e)),console.log(t.fromJson(e))})),a}},{key:"parseArrayToJson",value:function(e){throw new Error("Method not implemented.")}}]),e}(),m=a(29),y=a.n(m),g=a(202),w=a(65),E=a(185),D=a.n(E),b=a(187),k=a.n(b),O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hidden";arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.forEach((function(e){e.classList.add(t)}))},A="".concat("https://bkjira.atlassian.net","/browse/"),j=function(e){var t=e.cell,a=t.row,n=t.col,o=JSON.stringify({row:a,col:n}),s=function(e){e.preventDefault(),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),"mousedown"===e.type&&O(document.querySelectorAll(".ActiveCell"))};return r.a.createElement(w.c,{droppableId:o},(function(e,a){return r.a.createElement("div",{ref:e.innerRef,style:(n=a.isDraggingOver,{background:n?"lightblue":"white",padding:"8px"})},t.value.map((function(e,t){return r.a.createElement(w.b,{key:e,draggableId:e,index:t},(function(t,a){return r.a.createElement("div",Object.assign({onMouseDown:function(e){return s(e)},onMouseUp:function(e){return s(e)},onMouseOver:function(e){return s(e)},onMouseMove:function(e){return s(e)},ref:t.innerRef},t.draggableProps,{style:(n=a.isDragging,o=t.draggableProps.style,Object(g.a)({display:"flex",userSelect:"none",padding:"3px",marginTop:"2px",marginBottom:"2px",background:n?"lightgreen":"white"},o))}),r.a.createElement("div",Object.assign({},t.dragHandleProps,{style:{width:"20px",height:"20px"}}),r.a.createElement(D.a,{label:"drag-handle"})),r.a.createElement("div",{style:{marginLeft:"5px",marginRight:"10px"}},e),r.a.createElement("div",{onClick:function(){return function(e){window.open("".concat(A).concat(e),"_blank")}(e)},style:{width:"20px",height:"20px",cursor:"pointer"}},r.a.createElement(k.a,{label:"open-icon"})));var n,o}))})),e.placeholder);var n}))},x=function(e){var t=e.cell;return r.a.createElement("div",{onMouseDown:function(e){return e.stopPropagation()},onMouseOver:function(e){return e.stopPropagation()}},t.value)},C=function(){function e(t,a,n,r){Object(d.a)(this,e),this.data=new Array,this.users=new Array,this.issues=new Array,this.dates=new Array,this.startDate=void 0,this.endDate=void 0,this.startDate=n,this.endDate=r,this.addDates(),this.addUsers(t),this.addIssues(a),this.create()}return Object(f.a)(e,[{key:"calendarData",get:function(){return this.data}}]),Object(f.a)(e,[{key:"addDates",value:function(){for(var e=this.generateDates(new Date(this.startDate),new Date(this.endDate)),t=0;t<e.length;t++){var a=this.createCell(t+1,0,e[t],x);this.dates.push(a)}}},{key:"addUsers",value:function(e){for(var t=0;t<e.length;t++){var a=this.createCell(0,t+1,e[t].displayName);this.users.push(a)}}},{key:"addIssues",value:function(e){for(var t=this,a=new Map,n=function(n){var r=e[n],o=t.dates.find((function(e){return e.value===r.created.toLocaleDateString()})),s=t.users.find((function(e){return e.value===r.assignee.displayName}));if(o&&s){var i=o.col,c=s.row,l=a.get(JSON.stringify({row:c,col:i}));l||(l=[]),l.push(r.key),a.set(JSON.stringify({row:c,col:i}),l);var u=t.createCell(i,c,l,j);t.issues.push(u)}},r=0;r<e.length;r++)n(r)}},{key:"create",value:function(){var e=this,t=y()(this.startDate.setDate(this.startDate.getDate()-1)),a=y()(this.endDate),n=this.users.length+1,r=Math.trunc(y.a.duration(a.diff(t)).asDays())+1;console.log(this.startDate),console.log(this.endDate);for(var o=0;o<n;o++){this.data[o]=[];for(var s=0;s<r;s++){var i=this.createCell(s,o,[],j);this.addCell(i)}}this.dates.forEach((function(t){e.addCell(t)})),this.users.forEach((function(t){e.addCell(t)})),this.issues.forEach((function(t){e.addCell(t)}))}},{key:"createCell",value:function(e,t,a,n){return{col:e,row:t,value:a,DataViewer:n}}},{key:"addCell",value:function(e){this.data[e.row][e.col]=e}},{key:"generateDates",value:function(e,t){for(var a=new Array,n=e;n<=t;)a.push(new Date(n).toLocaleDateString()),n.setDate(n.getDate()+1);return a}}]),e}(),J=a(188);var S=a.n(J).a.create({baseURL:"http://localhost:3001"});S.interceptors.request.use((function(e){return e.url=e.url+"?jwt="+window.parent.window.token,e}));var M=function(){function e(){Object(d.a)(this,e),this.defaultQuery={startDate:y()().startOf("isoWeek").toDate(),endDate:y()().endOf("isoWeek").toDate()}}return Object(f.a)(e,[{key:"loadData",value:function(){var e,t,a,n,r,o=arguments;return l.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:this.defaultQuery,s.next=3,l.a.awrap(this.getData(e));case 3:return t=s.sent,a=(new p).parseArrayFromJson(t[0].data),n=(new h).parseArrayFromJson(t[1].data.issues),r=new C(a,n,e.startDate,e.endDate).calendarData,s.abrupt("return",r);case 8:case"end":return s.stop()}}),null,this)}},{key:"getData",value:function(e){var t="/users",a="/issues";if(e){e.userName&&(t="".concat(t,"/").concat(e.userName));var n="";e.issue&&(n="".concat(n,"project=").concat(e.issue,"&"));var r=y()(e.startDate).format("YYYY-MM-DD");n="".concat(n,"created>=").concat(r,"&");var o=y()(e.endDate).format("YYYY-MM-DD");(n="".concat(n,"created<=").concat(o,"&")).endsWith("&")&&(n=n.slice(0,-1)),a="".concat(a,"/").concat(n)}return Promise.all([S.get(t),S.get(a)])}}]),e}(),T=function(e){return function(t){var a,n;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t(R()),r.prev=1,a=new M,r.next=5,l.a.awrap(a.loadData(e));case 5:n=r.sent,console.log(n),t(I(n)),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(1),console.log(r.t0),t(Y(r.t0));case 14:case"end":return r.stop()}}),null,null,[[1,10]])}},R=function(){return{type:"FETCH_DATA_REQUEST"}},I=function(e){return{type:"FETCH_DATA_SUCCESS",payload:e}},Y=function(e){return{type:"FETCH_DATA_FAILURE",payload:e}},L=a(39),F=a(115),N=a(404),P=a(403),_=a(407),U=a(408),H=function(e){var t=function(e){return{width:"25%",flex:"0 1 auto",alignSelf:"auto",marginLeft:0===e?"0":"1%"}},a=e.filterHandler;return r.a.createElement(F.c,{onSubmit:function(e){return a(e)}},(function(e){var a=e.formProps,n=(e.dirty,e.submitting);return r.a.createElement("form",a,r.a.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"flex-start",alignItems:"flex-start",alignContent:"space-between"}},r.a.createElement("div",{style:t(0)},r.a.createElement(U.a,{label:"Start date",name:"startDate",defaultValue:y()().startOf("isoWeek").format("YYYY-MM-DD")},(function(e){var t=e.fieldProps;e.error,e.valid;return r.a.createElement(P.a,t)}))),r.a.createElement("div",{style:t(1)},r.a.createElement(U.a,{label:"End date",name:"endDate",defaultValue:y()().endOf("isoWeek").format("YYYY-MM-DD")},(function(e){var t=e.fieldProps;e.error,e.valid;return r.a.createElement(P.a,t)}))),r.a.createElement("div",{style:t(2)},r.a.createElement(U.a,{label:"User",name:"user",defaultValue:""},(function(e){var t=e.fieldProps;e.error,e.valid;return r.a.createElement(_.a,t)}))),r.a.createElement("div",{style:t(3)},r.a.createElement(U.a,{label:"Issue",name:"issue",defaultValue:""},(function(e){var t=e.fieldProps;e.error,e.valid;return r.a.createElement(_.a,t)}))),r.a.createElement("div",{style:{width:"10%",flex:"0 1 auto",alignSelf:"center",marginLeft:"1%",marginTop:"30px"}},r.a.createElement(N.a,{type:"submit",appearance:"primary",isDisabled:n},"Search"))))}))},W=(a(392),function(){return r.a.createElement("div",{className:"lds-roller"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))}),V=function(){var e=Object(L.d)((function(e){return e})),t=Object(L.c)();Object(n.useEffect)((function(){l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:t(T());case 1:case"end":return e.stop()}}))}),[]);var a=function(t,a){return e.data[t][a].value};return e.isLoading?r.a.createElement(W,null):r.a.createElement("div",{style:{paddingTop:"1%",paddingBottom:"1%",paddingLeft:"1.5%",paddingRight:"1.5%",backgroundColor:"white"}},r.a.createElement("div",null,r.a.createElement(H,{filterHandler:function(e){var a;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:a={userName:e.user,issue:e.issue,startDate:new Date(e.startDate),endDate:new Date(e.endDate)},t(T(a));case 2:case"end":return n.stop()}}))}})),r.a.createElement("div",{style:{marginTop:"1%"}},r.a.createElement(w.a,{onDragEnd:function(e){var n=e.source,r=e.destination;if(r){if(n.droppableId===r.droppableId){var o=JSON.parse(n.droppableId),s=o.row,c=o.col,l=function(e,t,a){var n=Array.from(e),r=n.splice(t,1),o=Object(i.a)(r,1)[0];return n.splice(a,0,o),n}(a(s,c),n.index,r.index);t(function(e,t,a){return{type:"REORDER",row:e,col:t,data:a}}(s,c,l))}else{var u=JSON.parse(n.droppableId),d=JSON.parse(r.droppableId),f=u.row,p=u.col,v=d.row,h=d.col,m=function(e,t,a,n){var r=Array.from(e),o=Array.from(t),s=r.splice(a.index,1),c=Object(i.a)(s,1)[0];o.splice(n.index,0,c);var l={};return l[a.droppableId]=r,l[n.droppableId]=o,l}(a(f,p),a(v,h),n,r);t((y=f,g=p,w=m[n.droppableId],E=v,D=h,b=m[r.droppableId],{type:"MOVE",sourRow:y,sourCol:g,sourData:w,destRow:E,destCol:D,destData:b}))}var y,g,w,E,D,b;O(document.querySelectorAll(".FloatingRect"))}}},r.a.createElement(u.a,{style:function(){return{".Spreadsheet td":{whiteSpace:"pre"}}},data:e.data}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var B=a(32),Q=a(200),q=a(89),$={isLoading:!0,data:[]},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REORDER":var a=Object.assign({},e.data[t.row][t.col]);a.value=t.data;var n=Object(q.a)(e.data);return n[t.row][t.col]=a,{data:n};case"MOVE":var r=Object.assign({},e.data[t.sourRow][t.sourCol]);r.value=t.sourData;var o=Object.assign({},e.data[t.destRow][t.destCol]);o.value=t.destData;var s=Object(q.a)(e.data);return s[t.sourRow][t.sourCol]=r,s[t.destRow][t.destCol]=o,{data:s};case"FETCH_DATA_REQUEST":return{isLoading:!0,data:[]};case"FETCH_DATA_SUCCESS":return{isLoading:!1,data:Object(q.a)(t.payload)};case"FETCH_DATA_FAILURE":return{isLoading:!1,data:[],error:t.payload};default:return e}},G=Object(B.d)(z,Object(B.a)(Q.a));s.a.render(r.a.createElement(L.a,{store:G},r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[210,1,2]]]);
//# sourceMappingURL=main.7ab494c0.chunk.js.map