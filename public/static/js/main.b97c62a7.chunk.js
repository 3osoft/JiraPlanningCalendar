(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{182:function(e,t,a){e.exports=a(332)},187:function(e,t,a){},195:function(e,t,a){},196:function(e,t,a){},332:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(30),i=a.n(o),s=(a(187),a(50)),c=a.n(s),u=a(25),l=a(26),d=a(79),f=a(70),v=a(81),m=a(173),h="FETCH_DATA";var p=a(77),y=(a(195),a(103)),w=a(343),D=a(342),b=a(346),k=a(344),E=(a(196),a(28)),j=a.n(E),O=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(y.c,{onSubmit:function(t){return e.props.filterHandler(t)}},(function(e){var t=e.formProps,a=(e.dirty,e.submitting);return r.a.createElement("form",t,r.a.createElement("div",{className:"filter-container"},r.a.createElement("div",{className:"filter-item"},r.a.createElement(k.a,{label:"Start date",name:"startDate",defaultValue:j()().startOf("isoWeek").format("YYYY-MM-DD")},(function(e){var t=e.fieldProps;e.error,e.valid;return r.a.createElement(D.a,t)}))),r.a.createElement("div",{className:"filter-item"},r.a.createElement(k.a,{label:"End date",name:"endDate",defaultValue:j()().endOf("isoWeek").format("YYYY-MM-DD")},(function(e){var t=e.fieldProps;e.error,e.valid;return r.a.createElement(D.a,t)}))),r.a.createElement("div",{className:"filter-item"},r.a.createElement(k.a,{label:"User",name:"user",defaultValue:""},(function(e){var t=e.fieldProps;e.error,e.valid;return r.a.createElement(b.a,t)}))),r.a.createElement("div",{className:"filter-item"},r.a.createElement(k.a,{label:"Issue",name:"issue",defaultValue:""},(function(e){var t=e.fieldProps;e.error,e.valid;return r.a.createElement(b.a,t)}))),r.a.createElement("div",{className:"submit-button"},r.a.createElement(w.a,{type:"submit",appearance:"primary",isDisabled:a},"Search"))))}))}}]),t}(r.a.Component),g=a(172);var J=a.n(g).a.create({baseURL:"http://localhost:3001"});function A(e){var t="/users",a="/issues";if(e){e.userName&&(t="".concat(t,"/").concat(e.userName));var n="";e.issue&&(n="".concat(n,"project=").concat(e.issue,"&"));var r=j()(e.startDate).format("YYYY-MM-DD");n="".concat(n,"created>=").concat(r,"&");var o=j()(e.endDate).format("YYYY-MM-DD");(n="".concat(n,"created<=").concat(o,"&")).endsWith("&")&&(n=n.slice(0,-1)),a="".concat(a,"/").concat(n)}return Promise.all([J.get(t),J.get(a)])}J.interceptors.request.use((function(e){return e.url=e.url+"?jwt="+window.parent.window.token,e}));var C=function(){function e(){Object(u.a)(this,e)}return Object(l.a)(e,[{key:"fromJson",value:function(e){return{accountType:e.accountType,accountId:e.accountId,displayName:e.displayName,isActive:e.active}}},{key:"toJson",value:function(e){throw new Error("Method not implemented.")}},{key:"parseArrayFromJson",value:function(e){var t=this,a=new Array;return e.forEach((function(e){var n=t.fromJson(e);n.isActive&&"atlassian"===n.accountType&&a.push(n)})),a}},{key:"parseArrayToJson",value:function(e){throw new Error("Method not implemented.")}}]),e}(),M=function(){function e(){Object(u.a)(this,e)}return Object(l.a)(e,[{key:"fromJson",value:function(e){return{key:e.key,name:e.name}}},{key:"toJson",value:function(e){throw new Error("Method not implemented.")}},{key:"parseArrayFromJson",value:function(e){var t=this,a=new Array;return e.forEach((function(e){a.push(t.fromJson(e))})),a}},{key:"parseArrayToJson",value:function(e){throw new Error("Method not implemented.")}}]),e}(),Y=function(){function e(){Object(u.a)(this,e)}return Object(l.a)(e,[{key:"fromJson",value:function(e){var t=new C,a=new M;return{key:e.key,assignee:t.fromJson(e.fields.assignee),creator:t.fromJson(e.fields.creator),created:new Date(e.fields.created),project:a.fromJson(e.fields.project)}}},{key:"toJson",value:function(e){throw new Error("Method not implemented.")}},{key:"parseArrayFromJson",value:function(e){var t=this,a=new Array;return e.forEach((function(e){a.push(t.fromJson(e))})),a}},{key:"parseArrayToJson",value:function(e){throw new Error("Method not implemented.")}}]),e}(),N=function(){function e(t,a,n){Object(u.a)(this,e),this.rowCount=void 0,this.columnCount=0,this.data=new Array,this.startDate=void 0,this.endDate=void 0,this.startDate=a,this.endDate=n,this.rowCount=t,this.prepare(),this.initData()}return Object(l.a)(e,[{key:"addUsers",value:function(e){for(var t=0;t<e.length;t++){var a=this.createCell(0,t+1,e[t].displayName);this.addCell(a)}return this}},{key:"addIssues",value:function(e){for(var t=this,a=this.data.map((function(e){return e[0]})),n=function(n){var r=e[n],o=t.data[0].find((function(e){return e.value===r.created.toLocaleDateString()})),i=a.find((function(e){return e.value===r.assignee.displayName}));if(o&&i){var s,c=o.col,u=i.row,l=t.data[u][c];s=l.value?"".concat(l.value,"\n").concat(r.key):r.key;var d=t.createCell(c,u,s);t.addCell(d)}},r=0;r<e.length;r++)n(r);return this}},{key:"build",value:function(){return this.data}},{key:"createCell",value:function(e,t,a){return{col:e,row:t,value:a}}},{key:"addCell",value:function(e){this.data[e.row][e.col]=e}},{key:"prepare",value:function(){var e=j()(this.startDate.setDate(this.startDate.getDate()-1)),t=j()(this.endDate);this.columnCount=Math.trunc(j.a.duration(t.diff(e)).asDays())+1,console.log(this.columnCount),console.log(e),console.log(t)}},{key:"initData",value:function(){for(var e=this.generateDates(this.startDate,this.endDate),t=0;t<this.rowCount;t++){for(var a=new Array,n=0;n<this.columnCount;n++){var r=void 0;r=0===t&&n>0?{row:t,col:n,value:e[n]}:{row:t,col:n,value:""},a.push(r)}this.data.push(a)}}},{key:"generateDates",value:function(e,t){for(var a=new Array,n=e;n<=t;)a.push(new Date(n).toLocaleDateString()),n.setDate(n.getDate()+1);return a}}]),e}(),S=function(){function e(){Object(u.a)(this,e),this.defaultQuery={startDate:j()().startOf("isoWeek").toDate(),endDate:j()().endOf("isoWeek").toDate()}}return Object(l.a)(e,[{key:"loadData",value:function(){var e,t,a,n,r,o,i,s,u=arguments;return c.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return e=u.length>0&&void 0!==u[0]?u[0]:this.defaultQuery,l.next=3,c.a.awrap(A(e));case 3:return t=l.sent,a=(new C).parseArrayFromJson(t[0].data),n=(new Y).parseArrayFromJson(t[1].data.issues),r=e.startDate,o=e.endDate,i=a.length+1,s=new N(i,r,o).addUsers(a).addIssues(n).build(),l.abrupt("return",s);case 11:case"end":return l.stop()}}),null,this)}}]),e}(),T=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).dataService=void 0,a.filterHandler=function(e){var t,n;return c.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t={userName:e.user,issue:e.issue,startDate:new Date(e.startDate),endDate:new Date(e.endDate)},r.next=3,c.a.awrap(a.dataService.loadData(t));case 3:n=r.sent,a.props.fetchData(n);case 5:case"end":return r.stop()}}))},a.dataService=new S,a}return Object(v.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",null,r.a.createElement(O,{filterHandler:this.filterHandler})),r.a.createElement("div",{className:"roster-container"},r.a.createElement(m.a,{data:this.props.data})))}},{key:"componentWillMount",value:function(){var e=this;this.dataService.loadData().then((function(t){e.props.fetchData(t)}))}}]),t}(r.a.Component),W=Object(p.b)((function(e){return{data:e.data}}),(function(e){return{fetchData:function(t){return e(function(e){return{type:h,data:e}}(t))}}}))(T);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F=a(71),I=a(174),P={data:[]};var x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return{data:Object(I.a)(t.data)};default:return e}},H=Object(F.b)(x);i.a.render(r.a.createElement(p.a,{store:H},r.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[182,1,2]]]);
//# sourceMappingURL=main.b97c62a7.chunk.js.map