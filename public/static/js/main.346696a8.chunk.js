(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{181:function(e,t,a){e.exports=a(330)},186:function(e,t,a){},194:function(e,t,a){},195:function(e,t,a){},330:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(29),i=a.n(o),c=(a(186),a(49)),u=a.n(c),s=a(25),l=a(26),d=a(78),f=a(69),m=a(80),v=a(172),h="FETCH_DATA";var p=a(76),w=(a(194),a(102)),y=a(341),b=a(340),D=a(344),E=a(342),k=(a(195),function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(w.c,{onSubmit:function(t){return e.props.filterHandler(t)}},(function(e){var t=e.formProps,a=(e.dirty,e.submitting);return r.a.createElement("form",t,r.a.createElement("div",{className:"filter-container"},r.a.createElement("div",{className:"filter-item"},r.a.createElement(E.a,{label:"Start date",name:"startDate",defaultValue:(new Date).toLocaleDateString()},(function(e){var t=e.fieldProps;e.error,e.valid;return r.a.createElement(b.a,t)}))),r.a.createElement("div",{className:"filter-item"},r.a.createElement(E.a,{label:"End date",name:"endDate",defaultValue:(new Date).toLocaleDateString()},(function(e){var t=e.fieldProps;e.error,e.valid;return r.a.createElement(b.a,t)}))),r.a.createElement("div",{className:"filter-item"},r.a.createElement(E.a,{label:"User",name:"user",defaultValue:""},(function(e){var t=e.fieldProps;e.error,e.valid;return r.a.createElement(D.a,t)}))),r.a.createElement("div",{className:"filter-item"},r.a.createElement(E.a,{label:"Issue",name:"issue",defaultValue:""},(function(e){var t=e.fieldProps;e.error,e.valid;return r.a.createElement(D.a,t)}))),r.a.createElement("div",{className:"submit-button"},r.a.createElement(y.a,{type:"submit",appearance:"primary",isDisabled:a},"Submit"))))}))}}]),t}(r.a.Component)),j=a(171);var g=a.n(j).a.create({baseURL:"http://localhost:3001"});function O(e){var t="/users",a="/issues";return e&&(e.userName&&(t="".concat(t,"/").concat(e.userName)),e.issue&&(a="".concat(a,"/").concat(e.issue))),Promise.all([g.get(t),g.get(a)])}g.interceptors.request.use((function(e){return e.url=e.url+"?jwt="+window.parent.window.token,e}));var J=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"fromJson",value:function(e){return{accountType:e.accountType,accountId:e.accountId,displayName:e.displayName,isActive:e.active}}},{key:"toJson",value:function(e){throw new Error("Method not implemented.")}},{key:"parseArrayFromJson",value:function(e){var t=this,a=new Array;return e.forEach((function(e){var n=t.fromJson(e);n.isActive&&"atlassian"===n.accountType&&a.push(n)})),a}},{key:"parseArrayToJson",value:function(e){throw new Error("Method not implemented.")}}]),e}(),A=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"fromJson",value:function(e){return{key:e.key,name:e.name}}},{key:"toJson",value:function(e){throw new Error("Method not implemented.")}},{key:"parseArrayFromJson",value:function(e){var t=this,a=new Array;return e.forEach((function(e){a.push(t.fromJson(e))})),a}},{key:"parseArrayToJson",value:function(e){throw new Error("Method not implemented.")}}]),e}(),C=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"fromJson",value:function(e){var t=new J,a=new A;return{key:e.key,assignee:t.fromJson(e.fields.assignee),creator:t.fromJson(e.fields.creator),created:new Date(e.fields.created),project:a.fromJson(e.fields.project)}}},{key:"toJson",value:function(e){throw new Error("Method not implemented.")}},{key:"parseArrayFromJson",value:function(e){var t=this,a=new Array;return e.forEach((function(e){a.push(t.fromJson(e))})),a}},{key:"parseArrayToJson",value:function(e){throw new Error("Method not implemented.")}}]),e}(),N=function(){function e(t,a){Object(s.a)(this,e),this.rowCount=void 0,this.columnCount=void 0,this.data=new Array,this.startDate=new Date((new Date).setDate((new Date).getDate()-1)),this.endDate=new Date((new Date).setDate((new Date).getDate()+100)),this.rowCount=t,this.columnCount=a,this.initData()}return Object(l.a)(e,[{key:"addUsers",value:function(e){for(var t=0;t<e.length;t++){var a=this.createCell(0,t+1,e[t].displayName);this.addCell(a)}return this}},{key:"addIssues",value:function(e){for(var t=this,a=this.data.map((function(e){return e[0]})),n=function(n){var r=e[n],o=t.data[0].find((function(e){return e.value===r.created.toLocaleDateString()})),i=a.find((function(e){return e.value===r.assignee.displayName}));if(o&&i){var c,u=o.col,s=i.row,l=t.data[s][u];c=l.value?"".concat(l.value,"\n").concat(r.key):r.key;var d=t.createCell(u,s,c);t.addCell(d)}},r=0;r<e.length;r++)n(r);return this}},{key:"build",value:function(){return this.data}},{key:"createCell",value:function(e,t,a){return{col:e,row:t,value:a}}},{key:"addCell",value:function(e){this.data[e.row][e.col]=e}},{key:"initData",value:function(){for(var e=this.generateDates(this.startDate,this.endDate),t=0;t<this.rowCount;t++){for(var a=new Array,n=0;n<this.columnCount;n++){var r=void 0;r=0===t&&n>0?{row:t,col:n,value:e[n]}:{row:t,col:n,value:""},a.push(r)}this.data.push(a)}}},{key:"generateDates",value:function(e,t){for(var a=new Array,n=e;n<=t;)a.push(new Date(n).toLocaleDateString()),n.setDate(n.getDate()+1);return a}}]),e}(),S=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"loadData",value:function(e){var t,a,n,r;return u.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,u.a.awrap(O(e));case 2:return t=o.sent,a=(new J).parseArrayFromJson(t[0].data),n=(new C).parseArrayFromJson(t[1].data.issues),r=new N(a.length+1,100).addUsers(a).addIssues(n).build(),o.abrupt("return",r);case 7:case"end":return o.stop()}}))}}]),e}(),T=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(f.a)(t).call(this,e))).dataService=void 0,a.filterHandler=function(e){var t,n;return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t={userName:e.user,issue:e.issue},r.next=3,u.a.awrap(a.dataService.loadData(t));case 3:n=r.sent,a.props.fetchData(n);case 5:case"end":return r.stop()}}))},a.dataService=new S,a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",null,r.a.createElement(k,{filterHandler:this.filterHandler})),r.a.createElement("div",{className:"roster-container"},r.a.createElement(v.a,{data:this.props.data})))}},{key:"componentWillMount",value:function(){var e=this;this.dataService.loadData().then((function(t){e.props.fetchData(t)}))}}]),t}(r.a.Component),M=Object(p.b)((function(e){return{data:e.data}}),(function(e){return{fetchData:function(t){return e(function(e){return{type:h,data:e}}(t))}}}))(T);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F=a(70),I=a(173),P={data:[]};var x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return{data:Object(I.a)(t.data)};default:return e}},H=Object(F.b)(x);i.a.render(r.a.createElement(p.a,{store:H},r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[181,1,2]]]);
//# sourceMappingURL=main.346696a8.chunk.js.map